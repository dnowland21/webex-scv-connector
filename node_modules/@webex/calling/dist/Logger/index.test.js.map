{"version":3,"names":["_types","require","_","_interopRequireDefault","describe","logLevel","logSpy","jest","spyOn","console","infoSpy","traceSpy","warnSpy","errorSpy","dummyWebexLogger","log","fn","info","warn","error","debug","trace","beforeEach","LOGGER","ERROR","afterEach","mockClear","fakePrint","dummyContext","file","method","it","expect","not","toHaveBeenCalledTimes","Error","toStrictEqual","setLogger","TRACE","getLogLevel","INFO","webexLoggerInfoSpy","setWebexLogger","toHaveBeenCalled"],"sources":["index.test.ts"],"sourcesContent":["import ExtendedError from '../Errors/catalog/ExtendedError';\nimport {LOGGER} from './types';\nimport log from '.';\n\ndescribe('Coverage tests for logger', () => {\n  let logLevel: LOGGER;\n\n  const logSpy = jest.spyOn(console, 'log');\n  const infoSpy = jest.spyOn(console, 'info');\n  const traceSpy = jest.spyOn(console, 'trace');\n  const warnSpy = jest.spyOn(console, 'warn');\n  const errorSpy = jest.spyOn(console, 'error');\n  const dummyWebexLogger = {\n    log: jest.fn(),\n    info: jest.fn(),\n    warn: jest.fn(),\n    error: jest.fn(),\n    debug: jest.fn(),\n    trace: jest.fn(),\n  };\n\n  beforeEach(() => {\n    logLevel = LOGGER.ERROR;\n  });\n\n  afterEach(() => {\n    logSpy.mockClear();\n    traceSpy.mockClear();\n    warnSpy.mockClear();\n    errorSpy.mockClear();\n    infoSpy.mockClear();\n  });\n\n  const fakePrint = 'Example log statement';\n  const dummyContext = {\n    file: 'logger.test.ts',\n    method: 'dummy',\n  };\n\n  it('Set the log level to error  and verify that all levels are not executed except error', () => {\n    log.info(fakePrint, dummyContext);\n    expect(infoSpy).not.toHaveBeenCalledTimes(1);\n\n    log.log(fakePrint, dummyContext);\n    expect(logSpy).not.toHaveBeenCalledTimes(1);\n\n    log.warn(fakePrint, dummyContext);\n    expect(warnSpy).not.toHaveBeenCalledTimes(1);\n\n    log.trace(fakePrint, dummyContext);\n    expect(traceSpy).not.toHaveBeenCalledTimes(1);\n\n    log.error(new Error(fakePrint) as ExtendedError, dummyContext);\n    expect(errorSpy).toHaveBeenCalledTimes(1);\n  });\n\n  it('Set the logger and verify the level', () => {\n    expect(logLevel).toStrictEqual(LOGGER.ERROR);\n    log.setLogger(LOGGER.TRACE);\n    expect(log.getLogLevel()).toStrictEqual(LOGGER.TRACE);\n  });\n\n  it('Set the log level to  Info and verify levels below info are executed or not', () => {\n    log.setLogger(LOGGER.INFO);\n\n    log.info(fakePrint, dummyContext);\n    expect(infoSpy).toHaveBeenCalledTimes(2);\n\n    log.log(fakePrint, dummyContext);\n    expect(logSpy).toHaveBeenCalledTimes(1);\n\n    log.warn(fakePrint, dummyContext);\n    expect(warnSpy).toHaveBeenCalledTimes(1);\n\n    log.trace(fakePrint, dummyContext);\n    expect(traceSpy).not.toHaveBeenCalledTimes(1);\n  });\n\n  it('Set the log level to Trace  and verify that all levels are executed', () => {\n    log.setLogger(LOGGER.TRACE);\n\n    log.info(fakePrint, dummyContext);\n    expect(infoSpy).toHaveBeenCalledTimes(2); // one during initialization and one with the statement\n\n    log.log(fakePrint, dummyContext);\n    expect(logSpy).toHaveBeenCalledTimes(1); // +1 because both info and log internally use console.log\n\n    log.warn(fakePrint, dummyContext);\n    expect(warnSpy).toHaveBeenCalledTimes(1);\n\n    log.trace(fakePrint, dummyContext);\n    expect(traceSpy).toHaveBeenCalledTimes(1);\n  });\n\n  it('Set webexLogger and check console log is not called', () => {\n    const webexLoggerInfoSpy = jest.spyOn(dummyWebexLogger, 'info');\n    log.setLogger(LOGGER.INFO);\n    logSpy.mockClear();\n    log.setWebexLogger(dummyWebexLogger);\n    log.info(fakePrint, dummyContext);\n    expect(logSpy).not.toHaveBeenCalled();\n    expect(webexLoggerInfoSpy).toHaveBeenCalledTimes(1);\n  });\n});\n"],"mappings":"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"}