{"version":3,"names":["_Utils","require","_SDKConnector","_interopRequireDefault","_Logger","_types","_WxCallBackendConnector","_constants","_UcmBackendConnector","CallSettings","exports","webex","logger","useProdWebexApis","_classCallCheck2","default","_defineProperty2","sdkConnector","SDKConnector","getWebex","setWebex","log","setLogger","level","CALL_SETTINGS_FILE","initializeBackendConnector","_createClass2","key","value","callingBackend","getCallingBackEnd","info","concat","file","method","name","CALLING_BACKEND","BWRKS","WXC","backendConnector","WxCallBackendConnector","UCM","UcmBackendConnector","Error","_getCallWaitingSetting","_asyncToGenerator2","_regenerator","mark","_callee","wrap","_callee$","_context","prev","next","abrupt","getCallWaitingSetting","stop","apply","arguments","_getDoNotDisturbSetting","_callee2","_callee2$","_context2","getDoNotDisturbSetting","_setDoNotDisturbSetting","_callee3","enabled","_callee3$","_context3","setDoNotDisturbSetting","_x","_getCallForwardSetting","_callee4","_callee4$","_context4","getCallForwardSetting","_setCallForwardSetting","_callee5","callForwardingRequest","_callee5$","_context5","setCallForwardSetting","_x2","_getVoicemailSetting","_callee6","_callee6$","_context6","getVoicemailSetting","_setVoicemailSetting","_callee7","voicemailRequest","_callee7$","_context7","setVoicemailSetting","_x3","_getCallForwardAlwaysSetting","_callee8","directoryNumber","_callee8$","_context8","getCallForwardAlwaysSetting","_x4","createCallSettingsClient"],"sources":["CallSettings.ts"],"sourcesContent":["/* eslint-disable valid-jsdoc */\nimport {getCallingBackEnd} from '../common/Utils';\nimport SDKConnector from '../SDKConnector';\nimport {ISDKConnector, WebexSDK} from '../SDKConnector/types';\nimport {\n  ICallSettings,\n  LoggerInterface,\n  CallForwardSetting,\n  CallSettingResponse,\n  VoicemailSetting,\n} from './types';\nimport log from '../Logger';\nimport {CALLING_BACKEND} from '../common/types';\n\nimport {WxCallBackendConnector} from './WxCallBackendConnector';\nimport {CALL_SETTINGS_FILE} from './constants';\nimport {UcmBackendConnector} from './UcmBackendConnector';\n\n/**\n * `CallSettings` module is designed to offer a range of APIs for retrieving and updating settings such as Call Waiting, Do Not Disturb (DND), Call Forwarding, Voicemail, and more.\n * These operations are tailored to work with various calling backends, providing flexibility and adaptability to different scenarios.\n * The selection of the appropriate calling backend occurs during the instantiation of the CallSettings Client and is determined by the user's entitlements.\n *\n * This code snippet demonstrates how to create an instance of `CallSettings` using webex and logger.\n *\n * Example\n * ```javascript\n * const callSettings = createCallSettingsClient(webex, logger);\n * ```\n */\nexport class CallSettings implements ICallSettings {\n  private sdkConnector: ISDKConnector;\n\n  private webex: WebexSDK;\n\n  private callingBackend!: CALLING_BACKEND;\n\n  private backendConnector!: ICallSettings;\n\n  /**\n   * @ignore\n   */\n  constructor(webex: WebexSDK, logger: LoggerInterface, useProdWebexApis?: boolean) {\n    this.sdkConnector = SDKConnector;\n\n    if (!this.sdkConnector.getWebex()) {\n      SDKConnector.setWebex(webex);\n    }\n\n    log.setLogger(logger.level, CALL_SETTINGS_FILE);\n    this.webex = this.sdkConnector.getWebex();\n    this.initializeBackendConnector(logger, useProdWebexApis);\n  }\n\n  /**\n   * Setup and initialize the Call Settings backend connector class object.\n   */\n  private initializeBackendConnector(logger: LoggerInterface, useProdWebexApis?: boolean) {\n    this.callingBackend = getCallingBackEnd(this.webex);\n    log.info(`Initializing Connector for ${this.callingBackend} backend`, {\n      file: CALL_SETTINGS_FILE,\n      method: this.initializeBackendConnector.name,\n    });\n\n    switch (this.callingBackend) {\n      case CALLING_BACKEND.BWRKS:\n      case CALLING_BACKEND.WXC:\n        this.backendConnector = new WxCallBackendConnector(this.webex, logger);\n        break;\n\n      case CALLING_BACKEND.UCM:\n        this.backendConnector = new UcmBackendConnector(this.webex, logger, useProdWebexApis);\n        break;\n\n      default:\n        throw new Error('Calling backend is not identified, exiting....');\n    }\n  }\n\n  /**\n   * Reads call waiting setting in Webex.\n   */\n  public async getCallWaitingSetting() {\n    return this.backendConnector.getCallWaitingSetting();\n  }\n\n  /**\n   * Reads DND setting in Webex.\n   */\n  public async getDoNotDisturbSetting(): Promise<CallSettingResponse> {\n    return this.backendConnector.getDoNotDisturbSetting();\n  }\n\n  /**\n   * Updates DND setting in Webex.\n   * @param enabled - true to enable DND, false to disable DND.\n   */\n  public async setDoNotDisturbSetting(enabled: boolean): Promise<CallSettingResponse> {\n    return this.backendConnector.setDoNotDisturbSetting(enabled);\n  }\n\n  /**\n   * Reads Call Forward setting in Webex.\n   *\n   */\n  public async getCallForwardSetting(): Promise<CallSettingResponse> {\n    return this.backendConnector.getCallForwardSetting();\n  }\n\n  /**\n   * Updates Call Forward setting in Webex.\n   * @param callForwardingRequest - CallForwardSetting object.\n   */\n  public async setCallForwardSetting(\n    callForwardingRequest: CallForwardSetting\n  ): Promise<CallSettingResponse> {\n    return this.backendConnector.setCallForwardSetting(callForwardingRequest);\n  }\n\n  /**\n   * Reads Voicemail setting in Webex.\n   */\n  public async getVoicemailSetting(): Promise<CallSettingResponse> {\n    return this.backendConnector.getVoicemailSetting();\n  }\n\n  /**\n   * Updates Voicemail setting in Webex.\n   * @param voicemailRequest - VoicemailSetting object.\n   */\n  public async setVoicemailSetting(\n    voicemailRequest: VoicemailSetting\n  ): Promise<CallSettingResponse> {\n    return this.backendConnector.setVoicemailSetting(voicemailRequest);\n  }\n\n  /**\n   * Reads the Call Forwarding Always settings in Webex.\n   * This will also check if CFA is set to Voicemail.\n   * If CFA is set to destination, that will take precedence.\n   * @param directoryNumber - Directory number of the user.\n   */\n  public async getCallForwardAlwaysSetting(directoryNumber?: string): Promise<CallSettingResponse> {\n    return this.backendConnector.getCallForwardAlwaysSetting(directoryNumber);\n  }\n}\n\n/**\n * Creates an instance of CallSettings Client.\n *\n * @param {WebexSDK} webex - An instance of the Webex SDK.\n * @param {LoggerInterface} logger - An instance implementing LoggerInterface used to set the log level for the module.\n */\nexport const createCallSettingsClient = (\n  webex: WebexSDK,\n  logger: LoggerInterface,\n  useProdWebexApis?: boolean\n): ICallSettings => new CallSettings(webex, logger, useProdWebexApis);\n"],"mappings":"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"}