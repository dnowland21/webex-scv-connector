{"version":3,"names":["_events","require","_request2","_interopRequireDefault","_utils","request","options","url","uri","headers","download","EventEmitter","upload","intercept","interceptors","then","_len","arguments","length","args","Array","_key","apply","concat","_request","_len2","_key2","slice","reverse"],"sources":["index.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-2020 Cisco Systems, Inc. See LICENSE file.\n */\n\nimport {EventEmitter} from 'events';\n\nimport _request from './request';\nimport {intercept} from './utils';\n\n/**\n * @param {Object} options\n * @returns {Promise}\n */\nexport default function request(options) {\n  if (options.url) {\n    options.uri = options.url;\n    options.url = null;\n  }\n\n  options.headers = options.headers || {};\n\n  options.download = new EventEmitter();\n  options.upload = new EventEmitter();\n\n  return intercept(options, options.interceptors, 'Request')\n    .then((...args) => {\n      // if provided own request function, use that instead\n      // there are use cases where developer may want to provide whatever request promise they wish\n      // for example, may even use window.postMessages for parent iframe uses cases\n      if (options.request) {\n        return options.request(options, ...args);\n      }\n\n      return _request(options, ...args);\n    })\n    .then((...args) => {\n      return intercept(options, options.interceptors.slice().reverse(), 'Response', ...args);\n    });\n}\n"],"mappings":";;;;;;;;AAIA,IAAAA,OAAA,GAAAC,OAAA;AAEA,IAAAC,SAAA,GAAAC,sBAAA,CAAAF,OAAA;AACA,IAAAG,MAAA,GAAAH,OAAA;AAPA;AACA;AACA;;AAOA;AACA;AACA;AACA;AACe,SAASI,OAAOA,CAACC,OAAO,EAAE;EACvC,IAAIA,OAAO,CAACC,GAAG,EAAE;IACfD,OAAO,CAACE,GAAG,GAAGF,OAAO,CAACC,GAAG;IACzBD,OAAO,CAACC,GAAG,GAAG,IAAI;EACpB;EAEAD,OAAO,CAACG,OAAO,GAAGH,OAAO,CAACG,OAAO,IAAI,CAAC,CAAC;EAEvCH,OAAO,CAACI,QAAQ,GAAG,IAAIC,oBAAY,CAAC,CAAC;EACrCL,OAAO,CAACM,MAAM,GAAG,IAAID,oBAAY,CAAC,CAAC;EAEnC,OAAO,IAAAE,gBAAS,EAACP,OAAO,EAAEA,OAAO,CAACQ,YAAY,EAAE,SAAS,CAAC,CACvDC,IAAI,CAAC,YAAa;IAAA,SAAAC,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAATC,IAAI,OAAAC,KAAA,CAAAJ,IAAA,GAAAK,IAAA,MAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA;MAAJF,IAAI,CAAAE,IAAA,IAAAJ,SAAA,CAAAI,IAAA;IAAA;IACZ;IACA;IACA;IACA,IAAIf,OAAO,CAACD,OAAO,EAAE;MACnB,OAAOC,OAAO,CAACD,OAAO,CAAAiB,KAAA,CAAfhB,OAAO,GAASA,OAAO,EAAAiB,MAAA,CAAKJ,IAAI,EAAC;IAC1C;IAEA,OAAOK,iBAAQ,CAAAF,KAAA,UAAChB,OAAO,EAAAiB,MAAA,CAAKJ,IAAI,EAAC;EACnC,CAAC,CAAC,CACDJ,IAAI,CAAC,YAAa;IAAA,SAAAU,KAAA,GAAAR,SAAA,CAAAC,MAAA,EAATC,IAAI,OAAAC,KAAA,CAAAK,KAAA,GAAAC,KAAA,MAAAA,KAAA,GAAAD,KAAA,EAAAC,KAAA;MAAJP,IAAI,CAAAO,KAAA,IAAAT,SAAA,CAAAS,KAAA;IAAA;IACZ,OAAOb,gBAAS,CAAAS,KAAA,UAAChB,OAAO,EAAEA,OAAO,CAACQ,YAAY,CAACa,KAAK,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,EAAE,UAAU,EAAAL,MAAA,CAAKJ,IAAI,EAAC;EACxF,CAAC,CAAC;AACN"}