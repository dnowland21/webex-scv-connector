{"version":3,"names":["_httpCore","require","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf2","default","result","NewTarget","constructor","_Reflect$construct","arguments","apply","_possibleConstructorReturn2","Reflect","sham","Proxy","Boolean","prototype","valueOf","call","e","WebexHttpError","exports","_HttpError","_inherits2","_super","_classCallCheck2","_createClass2","key","value","parse","res","message","_apply","HttpError","_defineProperty","enumerable","options","body","errorCode","concat","url","method","uri","service","toUpperCase","resource","headers","trackingid","writeable","retryAfter","makeSubTypes","TooManyRequests","_HttpError$BadRequest","_super2","BadRequest"],"sources":["webex-http-error.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-2020 Cisco Systems, Inc. See LICENSE file.\n */\n\nimport {HttpError} from '@webex/http-core';\n\n/**\n * Webex-specific http error class\n */\nexport default class WebexHttpError extends HttpError {\n  /**\n   * Very similar to {@link HttpError#parse()}, but additionally adds some\n   * useful headers to the message string\n   * @param {HttpResponse} res\n   * @returns {string}\n   */\n  parse(res) {\n    let message = Reflect.apply(HttpError.prototype.parse, this, [res]);\n\n    Reflect.defineProperty(this, 'options', {\n      enumerable: false,\n      value: res.options,\n    });\n\n    Reflect.defineProperty(this, 'body', {\n      enumerable: false,\n      value: res.body,\n    });\n\n    if (this.body && this.body.errorCode) {\n      message += `\\nerrorCode : ${this.body.errorCode}`;\n    }\n\n    if (this.options.url) {\n      message += `\\n${this.options.method} ${this.options.url}`;\n    } else if (this.options.uri) {\n      message += `\\n${this.options.method} ${this.options.uri}`;\n    } else {\n      message += `\\n${this.options.method} ${this.options.service.toUpperCase()}/${\n        this.options.resource\n      }`;\n    }\n    message += `\\nWEBEX_TRACKING_ID: ${this.options.headers.trackingid}`;\n    if (this.options.headers && this.options.headers['x-trans-id']) {\n      message += `\\nX-Trans-Id: ${this.options.headers['x-trans-id']}`;\n    }\n    if (this.headers['retry-after']) {\n      Reflect.defineProperty(this, 'retryAfter', {\n        enumerable: true,\n        value: this.headers['retry-after'],\n        writeable: false,\n      });\n\n      message += `\\nRETRY-AFTER: ${this.retryAfter}`;\n    }\n    message += '\\n';\n\n    return message;\n  }\n}\n\nHttpError.makeSubTypes(WebexHttpError);\n\n/**\n * TooManyRequests\n */\nclass TooManyRequests extends HttpError.BadRequest {}\n\nHttpError[429] = TooManyRequests;\nHttpError.TooManyRequests = TooManyRequests;\n"],"mappings":"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"}